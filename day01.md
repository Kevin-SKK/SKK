## day01

#### 01-ETL的实现

- 工具(95%)
  - kettle软件
  - 业务相对固定 数据相对固定
    - 不灵活 复用率比较高
- 代码(hard coding)
  - 我们这个阶段学习的
  - 代码方法
  - 个性化需求
    - 优点 灵活 可以根据具体需求做出相应改变





#### 02-数据格式

- csv格式

  - 有一个固定的分隔符进行分割

    - 可以描述的一个格式

  - 用处

    - 以二维表格的形式存储一些数据(用来存储数据的)

    

- json格式

  - JSON格式和Python中的字典很相似

    Python中的字典可以和JSON格式，进行无缝的切换

  - 用处

    - json这个中数据格式
      - 可以把各种语言的数据都转化为json格式
      - 并且各种语言都可以把json格式的数据 转化为 本语言的数据格式
    - python
      - python数据 ==> json数据
      - json数据 ==> python



- 业务相关内容
  - 01-json数据
    - 存储json格式数据的文件
      - 每个文件中有1024条数据
        - 每一条数据都是 一个订单的信息
        - key : value
        - product : [{},{},{}]
          - {} ==> 这个订单购买的商品
- 需求1
  - 把上面的所有的json文件格式的数据  
    - 加载到数据库中
    - 加载到csv文件中





- 数据分类
  - 结构化数据
    - 可以用语言描述的
    - excel, csv
  - 半结构化数据
    - 只有一部分数据可以用语言描述
    - json, XML
  - 非结构化数据
    - 无法进行描述
    - MP3, avi, 图片
  - 基础类型格式 和 结构化\半结构化\非结构化
    - 基础类型的数据: 单一数据的格式
      - name = "123"
    - 结构化\半结构化\非结构化: 一堆数据在一起整体的一个形式 
  - 大数据处理的数据
    - 结构化数据
    - 半结构化数据





#### 03-ETL的需求

- 把json文件(订单数据) 加载到数仓中

- 问题1

  - 处理的文件(定期处理)
    - 不能重复处理
  - 解决方法
    - 获取所有的文件名 把处理过的文件的名字保存起来  文件保存
      - x00,x01,x02
    - 获取所有的文件名 把处理过的文件的名字保存起来  数据库保存
      - 数据表
      - file_name 字段 ==> 处理过的文件的名字

- 业务

- ```sql
  # 创建元数据管理库
  CREATE DATABASE metadata CHARACTER SET utf8;
  # 创建零售数据库(目的地)
  CREATE DATABASE retail CHARACTER SET utf8;
  # 创建数据源库（提供被采集数据的）
  CREATE DATABASE source_data CHARACTER SET utf8;
  ```



- 项目结构
  - ![image-20230510105914818](day01.assets/image-20230510105914818.png)







#### 04-业务

![image-20230510111544687](day01.assets/image-20230510111544687.png)



- 需求1

  - 把订单数据的json文件 导入 到数仓(msyql数据库替代)中

    -  ![image-20230510111643400](day01.assets/image-20230510111643400.png)

  - 把以上的json文件进行 ETL 

    - 通过python代码 来完成ETL的工作的

     ![image-20230510111809036](day01.assets/image-20230510111809036.png)

  - 三个数据库

    - metadata数据库
      - 元数据 ==> 处理过的json订单文件的文件名
    - detail数据库
      - 替换数仓的
    - source_data数据库
      - 后台服务器中的后台数据库





- 代码实现
  - 日志功能实现
    -  ![image-20230510112302002](day01.assets/image-20230510112302002.png)
  - 获取所有的json文件
    - 获取需要处理的json订单文件的文件名字(绝对路径)



#### 05-业务代码

- 1.  通过日志工具类 获取日志对象

- ![image-20230510154720460](day01.assets/image-20230510154720460.png)
- 2. 日志相关的配置文件
     1. 日志文件可以根据时间 不断产生新的文件
     2. 如果需要修改日志相关路径 只需要在配置文件中修改一次即可(整个项目都可以应用)

![image-20230510154934393](day01.assets/image-20230510154934393.png)